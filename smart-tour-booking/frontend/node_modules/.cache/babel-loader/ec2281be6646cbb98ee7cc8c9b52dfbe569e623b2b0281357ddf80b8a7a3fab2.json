{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import{bookingsAPI,paymentsAPI}from'../services/api';import'./Home.css';import{FaCreditCard,FaMobileAlt,FaQrcode,FaCheckCircle,FaArrowLeft,FaRupeeSign,FaCopy}from'react-icons/fa';import{loadStripe}from'@stripe/stripe-js';import{Elements,CardElement,useStripe,useElements}from'@stripe/react-stripe-js';// Initialize Stripe\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const stripePromise=loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY||'pk_test_51QX8EXAMPLE');// Card Payment Form Component\nconst CardPaymentForm=_ref=>{let{amount,bookingDetails,onPaymentSuccess,onPaymentError,disabled}=_ref;const stripe=useStripe();const elements=useElements();const[loading,setLoading]=useState(false);const handleSubmit=async event=>{event.preventDefault();if(!stripe||!elements){return;}setLoading(true);try{// First create the booking\nconst bookingResponse=await bookingsAPI.createBooking({tourId:bookingDetails.tourId,vehicleId:bookingDetails.vehicleId,startDate:bookingDetails.formData.startDate,endDate:bookingDetails.formData.endDate,numberOfPassengers:bookingDetails.formData.numberOfPassengers,passengers:bookingDetails.formData.passengers,estimatedKms:bookingDetails.formData.estimatedKms,foodPreferences:bookingDetails.formData.foodPreferences,specialRequests:bookingDetails.formData.specialRequests});const newBookingId=bookingResponse.data.data._id;// Create payment intent for the booking\nconst intentResponse=await paymentsAPI.createPaymentIntent(newBookingId,amount);const secret=intentResponse.data.clientSecret;// Confirm the payment\nconst{error,paymentIntent}=await stripe.confirmCardPayment(secret,{payment_method:{card:elements.getElement(CardElement),billing_details:{name:'Customer Name'// You can get this from user context\n}}});if(error){onPaymentError(error.message);}else if(paymentIntent.status==='succeeded'){// Record the payment in our database\nawait paymentsAPI.recordPayment({bookingId:newBookingId,amount,paymentMethod:'credit-card',transactionId:paymentIntent.id,stripePaymentIntentId:paymentIntent.id,paymentType:'advance'});onPaymentSuccess(newBookingId);}else{onPaymentError('Payment was not successful. Please try again.');}}catch(error){var _error$response,_error$response$data;console.error('Card payment error:',error);onPaymentError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Payment failed. Please try again.');}finally{setLoading(false);}};const cardElementOptions={style:{base:{fontSize:'16px',color:'#424770','::placeholder':{color:'#aab7c4'},fontFamily:'system-ui, -apple-system, sans-serif'},invalid:{color:'#9e2146'}}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"card-payment-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-element-container\",children:/*#__PURE__*/_jsx(CardElement,{options:cardElementOptions})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!stripe||loading||disabled,className:\"card-payment-btn\",children:loading?'Processing...':\"Pay \\u20B9\".concat(amount===null||amount===void 0?void 0:amount.toLocaleString())})]});};const Payment=()=>{var _costBreakdown$advanc,_costBreakdown$totalA,_costBreakdown$advanc2,_costBreakdown$advanc3;const location=useLocation();const navigate=useNavigate();const[paymentMethod,setPaymentMethod]=useState('');const[paymentStatus,setPaymentStatus]=useState('pending');// pending, processing, completed, failed\nconst[transactionId,setTransactionId]=useState('');const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');// Get booking data from navigation state\nconst bookingData=location.state;useEffect(()=>{if(!bookingData){navigate('/tours');return;}},[bookingData,navigate]);if(!bookingData){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{padding:'40px 20px',textAlign:'center'},children:\"Loading...\"});}const{tourId,vehicleId,bookingData:formData,costBreakdown}=bookingData;const paymentMethods=[{id:'card',name:'Credit/Debit Card',icon:/*#__PURE__*/_jsx(FaCreditCard,{}),description:'Pay securely with your credit or debit card',requiresTransactionId:false},{id:'upi',name:'UPI Payment',icon:/*#__PURE__*/_jsx(FaMobileAlt,{}),description:'Pay using UPI apps like Google Pay, PhonePe, Paytm',upiIds:[{name:'Google Pay',id:'smarttravel@okicici',qr:'GPAY_QR'},{name:'PhonePe',id:'smarttravel@ybl',qr:'PHONEPE_QR'},{name:'Paytm',id:'smarttravel@paytm',qr:'PAYTM_QR'}],requiresTransactionId:true},{id:'qr',name:'QR Code Scan',icon:/*#__PURE__*/_jsx(FaQrcode,{}),description:'Scan QR code with any UPI app',qrCode:'MAIN_QR_CODE',requiresTransactionId:true}];const handlePaymentMethodSelect=methodId=>{setPaymentMethod(methodId);};const copyToClipboard=text=>{navigator.clipboard.writeText(text);setMessage('UPI ID copied to clipboard!');setTimeout(()=>setMessage(''),2000);};const handleCardPaymentSuccess=bookingId=>{setPaymentStatus('completed');setMessage('Payment successful! Booking confirmed.');// Redirect to my bookings after 3 seconds\nsetTimeout(()=>{navigate('/my-bookings');},3000);};const handleCardPaymentError=errorMessage=>{setPaymentStatus('failed');setMessage(errorMessage);};const handlePaymentComplete=async()=>{if(!paymentMethod){setMessage('Please select a payment method');return;}const selectedMethod=paymentMethods.find(method=>method.id===paymentMethod);if(selectedMethod.requiresTransactionId&&!transactionId.trim()){setMessage('Please enter transaction ID');return;}setLoading(true);setPaymentStatus('processing');try{// First create the booking\nconst bookingResponse=await bookingsAPI.createBooking({tourId,vehicleId,startDate:formData.startDate,endDate:formData.endDate,numberOfPassengers:formData.numberOfPassengers,passengers:formData.passengers,estimatedKms:formData.estimatedKms,foodPreferences:formData.foodPreferences,specialRequests:formData.specialRequests});const bookingId=bookingResponse.data.data._id;// Then record the payment\nawait paymentsAPI.recordPayment({bookingId,amount:costBreakdown.advanceAmount,paymentMethod,transactionId:selectedMethod.requiresTransactionId?transactionId:\"CARD_\".concat(Date.now()),paymentType:'advance'});setPaymentStatus('completed');setMessage('Payment successful! Booking confirmed.');// Redirect to my bookings after 3 seconds\nsetTimeout(()=>{navigate('/my-bookings');},3000);}catch(error){var _error$response2,_error$response2$data;console.error('Payment error:',error);setPaymentStatus('failed');setMessage(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Payment failed. Please try again.');}finally{setLoading(false);}};const selectedMethod=paymentMethods.find(method=>method.id===paymentMethod);return/*#__PURE__*/_jsx(\"div\",{className:\"payment-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payment-header\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(-1),className:\"back-btn\",children:[/*#__PURE__*/_jsx(FaArrowLeft,{}),\" Back to Booking\"]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Complete Your Payment\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Secure payment for your tour booking\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.includes('successful')?'success':message.includes('copied')?'success':'error'),children:message}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-summary\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Booking Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Tour:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"Tour ID: \",tourId]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Vehicle:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"Vehicle ID: \",vehicleId]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Duration:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[formData.startDate,\" to \",formData.endDate]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Passengers:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:formData.numberOfPassengers})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item total\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Advance Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"\\u20B9\",costBreakdown===null||costBreakdown===void 0?void 0:(_costBreakdown$advanc=costBreakdown.advanceAmount)===null||_costBreakdown$advanc===void 0?void 0:_costBreakdown$advanc.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item total\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Total Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"\\u20B9\",costBreakdown===null||costBreakdown===void 0?void 0:(_costBreakdown$totalA=costBreakdown.totalAmount)===null||_costBreakdown$totalA===void 0?void 0:_costBreakdown$totalA.toLocaleString()]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-methods\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Select Payment Method\"}),/*#__PURE__*/_jsx(\"div\",{className:\"methods-grid\",children:paymentMethods.map(method=>/*#__PURE__*/_jsxs(\"div\",{className:\"method-card \".concat(paymentMethod===method.id?'selected':''),onClick:()=>handlePaymentMethodSelect(method.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"method-icon\",children:method.icon}),/*#__PURE__*/_jsxs(\"div\",{className:\"method-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:method.name}),/*#__PURE__*/_jsx(\"p\",{children:method.description})]}),paymentMethod===method.id&&/*#__PURE__*/_jsx(FaCheckCircle,{className:\"selected-icon\"})]},method.id))})]}),selectedMethod&&/*#__PURE__*/_jsxs(\"div\",{className:\"payment-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Details\"}),selectedMethod.id==='card'&&/*#__PURE__*/_jsxs(\"div\",{className:\"card-details\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Enter your card details below to complete the payment:\"}),/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(CardPaymentForm,{amount:costBreakdown===null||costBreakdown===void 0?void 0:costBreakdown.advanceAmount,bookingDetails:{tourId,vehicleId,formData},onPaymentSuccess:handleCardPaymentSuccess,onPaymentError:handleCardPaymentError,disabled:loading||paymentStatus==='completed'})})]}),selectedMethod.id==='upi'&&/*#__PURE__*/_jsxs(\"div\",{className:\"upi-details\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Choose your preferred UPI app and pay the advance amount:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upi-options\",children:selectedMethod.upiIds.map((upi,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"upi-option\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"upi-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:upi.name}),/*#__PURE__*/_jsx(\"p\",{className:\"upi-id\",children:upi.id})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>copyToClipboard(upi.id),className:\"copy-btn\",children:[/*#__PURE__*/_jsx(FaCopy,{}),\" Copy\"]})]},index))})]}),selectedMethod.id==='qr'&&/*#__PURE__*/_jsxs(\"div\",{className:\"qr-details\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Scan the QR code below with any UPI app:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"qr-code\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"qr-placeholder\",children:[/*#__PURE__*/_jsx(FaQrcode,{className:\"qr-icon\"}),/*#__PURE__*/_jsx(\"p\",{children:\"QR Code\"}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Scan to pay \\u20B9\",costBreakdown===null||costBreakdown===void 0?void 0:(_costBreakdown$advanc2=costBreakdown.advanceAmount)===null||_costBreakdown$advanc2===void 0?void 0:_costBreakdown$advanc2.toLocaleString()]})]})})]}),selectedMethod.requiresTransactionId&&/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"transactionId\",children:\"Transaction ID / UTR Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"transactionId\",value:transactionId,onChange:e=>setTransactionId(e.target.value),placeholder:\"Enter transaction ID after payment\",className:\"transaction-field\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Enter the transaction ID from your UPI app after completing the payment\"})]})]}),selectedMethod&&selectedMethod.id!=='card'&&/*#__PURE__*/_jsxs(\"div\",{className:\"payment-action\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"payment-info\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"amount-display\",children:[/*#__PURE__*/_jsx(FaRupeeSign,{className:\"amount-icon\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"amount\",children:[\"\\u20B9\",costBreakdown===null||costBreakdown===void 0?void 0:(_costBreakdown$advanc3=costBreakdown.advanceAmount)===null||_costBreakdown$advanc3===void 0?void 0:_costBreakdown$advanc3.toLocaleString()]}),/*#__PURE__*/_jsx(\"span\",{className:\"amount-label\",children:\"Advance Payment\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePaymentComplete,disabled:!paymentMethod||selectedMethod.requiresTransactionId&&!transactionId.trim()||loading||paymentStatus==='completed',className:\"payment-btn \".concat(paymentStatus==='completed'?'success':''),children:loading?'Processing...':paymentStatus==='completed'?'Payment Completed!':paymentStatus==='processing'?'Confirming Payment...':'Confirm Payment'})]})]})]})});};export default Payment;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","bookingsAPI","paymentsAPI","FaCreditCard","FaMobileAlt","FaQrcode","FaCheckCircle","FaArrowLeft","FaRupeeSign","FaCopy","loadStripe","Elements","CardElement","useStripe","useElements","jsx","_jsx","jsxs","_jsxs","stripePromise","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","CardPaymentForm","_ref","amount","bookingDetails","onPaymentSuccess","onPaymentError","disabled","stripe","elements","loading","setLoading","handleSubmit","event","preventDefault","bookingResponse","createBooking","tourId","vehicleId","startDate","formData","endDate","numberOfPassengers","passengers","estimatedKms","foodPreferences","specialRequests","newBookingId","data","_id","intentResponse","createPaymentIntent","secret","clientSecret","error","paymentIntent","confirmCardPayment","payment_method","card","getElement","billing_details","name","message","status","recordPayment","bookingId","paymentMethod","transactionId","id","stripePaymentIntentId","paymentType","_error$response","_error$response$data","console","response","cardElementOptions","style","base","fontSize","color","fontFamily","invalid","onSubmit","className","children","options","type","concat","toLocaleString","Payment","_costBreakdown$advanc","_costBreakdown$totalA","_costBreakdown$advanc2","_costBreakdown$advanc3","location","navigate","setPaymentMethod","paymentStatus","setPaymentStatus","setTransactionId","setMessage","bookingData","state","padding","textAlign","costBreakdown","paymentMethods","icon","description","requiresTransactionId","upiIds","qr","qrCode","handlePaymentMethodSelect","methodId","copyToClipboard","text","navigator","clipboard","writeText","setTimeout","handleCardPaymentSuccess","handleCardPaymentError","errorMessage","handlePaymentComplete","selectedMethod","find","method","trim","advanceAmount","Date","now","_error$response2","_error$response2$data","onClick","includes","totalAmount","map","upi","index","htmlFor","value","onChange","e","target","placeholder"],"sources":["C:/Users/YOGESHWARAN/your smart travel partner/smart-tour-booking/frontend/src/pages/Payment.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { bookingsAPI, paymentsAPI } from '../services/api';\r\nimport './Home.css';\r\nimport { FaCreditCard, FaMobileAlt, FaQrcode, FaCheckCircle, FaArrowLeft, FaRupeeSign, FaCopy } from 'react-icons/fa';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { Elements, CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\r\n\r\n// Initialize Stripe\r\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY || 'pk_test_51QX8EXAMPLE');\r\n\r\n// Card Payment Form Component\r\nconst CardPaymentForm = ({ amount, bookingDetails, onPaymentSuccess, onPaymentError, disabled }) => {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (!stripe || !elements) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      // First create the booking\r\n      const bookingResponse = await bookingsAPI.createBooking({\r\n        tourId: bookingDetails.tourId,\r\n        vehicleId: bookingDetails.vehicleId,\r\n        startDate: bookingDetails.formData.startDate,\r\n        endDate: bookingDetails.formData.endDate,\r\n        numberOfPassengers: bookingDetails.formData.numberOfPassengers,\r\n        passengers: bookingDetails.formData.passengers,\r\n        estimatedKms: bookingDetails.formData.estimatedKms,\r\n        foodPreferences: bookingDetails.formData.foodPreferences,\r\n        specialRequests: bookingDetails.formData.specialRequests\r\n      });\r\n\r\n      const newBookingId = bookingResponse.data.data._id;\r\n\r\n      // Create payment intent for the booking\r\n      const intentResponse = await paymentsAPI.createPaymentIntent(newBookingId, amount);\r\n      const secret = intentResponse.data.clientSecret;\r\n\r\n      // Confirm the payment\r\n      const { error, paymentIntent } = await stripe.confirmCardPayment(secret, {\r\n        payment_method: {\r\n          card: elements.getElement(CardElement),\r\n          billing_details: {\r\n            name: 'Customer Name', // You can get this from user context\r\n          },\r\n        },\r\n      });\r\n\r\n      if (error) {\r\n        onPaymentError(error.message);\r\n      } else if (paymentIntent.status === 'succeeded') {\r\n        // Record the payment in our database\r\n        await paymentsAPI.recordPayment({\r\n          bookingId: newBookingId,\r\n          amount,\r\n          paymentMethod: 'credit-card',\r\n          transactionId: paymentIntent.id,\r\n          stripePaymentIntentId: paymentIntent.id,\r\n          paymentType: 'advance'\r\n        });\r\n\r\n        onPaymentSuccess(newBookingId);\r\n      } else {\r\n        onPaymentError('Payment was not successful. Please try again.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Card payment error:', error);\r\n      onPaymentError(error.response?.data?.message || 'Payment failed. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const cardElementOptions = {\r\n    style: {\r\n      base: {\r\n        fontSize: '16px',\r\n        color: '#424770',\r\n        '::placeholder': {\r\n          color: '#aab7c4',\r\n        },\r\n        fontFamily: 'system-ui, -apple-system, sans-serif',\r\n      },\r\n      invalid: {\r\n        color: '#9e2146',\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"card-payment-form\">\r\n      <div className=\"card-element-container\">\r\n        <CardElement options={cardElementOptions} />\r\n      </div>\r\n      <button\r\n        type=\"submit\"\r\n        disabled={!stripe || loading || disabled}\r\n        className=\"card-payment-btn\"\r\n      >\r\n        {loading ? 'Processing...' : `Pay ₹${amount?.toLocaleString()}`}\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst Payment = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const [paymentMethod, setPaymentMethod] = useState('');\r\n  const [paymentStatus, setPaymentStatus] = useState('pending'); // pending, processing, completed, failed\r\n  const [transactionId, setTransactionId] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n\r\n  // Get booking data from navigation state\r\n  const bookingData = location.state;\r\n\r\n  useEffect(() => {\r\n    if (!bookingData) {\r\n      navigate('/tours');\r\n      return;\r\n    }\r\n  }, [bookingData, navigate]);\r\n\r\n  if (!bookingData) {\r\n    return <div className=\"container\" style={{ padding: '40px 20px', textAlign: 'center' }}>Loading...</div>;\r\n  }\r\n\r\n  const { tourId, vehicleId, bookingData: formData, costBreakdown } = bookingData;\r\n\r\n  const paymentMethods = [\r\n    {\r\n      id: 'card',\r\n      name: 'Credit/Debit Card',\r\n      icon: <FaCreditCard />,\r\n      description: 'Pay securely with your credit or debit card',\r\n      requiresTransactionId: false\r\n    },\r\n    {\r\n      id: 'upi',\r\n      name: 'UPI Payment',\r\n      icon: <FaMobileAlt />,\r\n      description: 'Pay using UPI apps like Google Pay, PhonePe, Paytm',\r\n      upiIds: [\r\n        { name: 'Google Pay', id: 'smarttravel@okicici', qr: 'GPAY_QR' },\r\n        { name: 'PhonePe', id: 'smarttravel@ybl', qr: 'PHONEPE_QR' },\r\n        { name: 'Paytm', id: 'smarttravel@paytm', qr: 'PAYTM_QR' }\r\n      ],\r\n      requiresTransactionId: true\r\n    },\r\n    {\r\n      id: 'qr',\r\n      name: 'QR Code Scan',\r\n      icon: <FaQrcode />,\r\n      description: 'Scan QR code with any UPI app',\r\n      qrCode: 'MAIN_QR_CODE',\r\n      requiresTransactionId: true\r\n    }\r\n  ];\r\n\r\n  const handlePaymentMethodSelect = (methodId) => {\r\n    setPaymentMethod(methodId);\r\n  };\r\n\r\n  const copyToClipboard = (text) => {\r\n    navigator.clipboard.writeText(text);\r\n    setMessage('UPI ID copied to clipboard!');\r\n    setTimeout(() => setMessage(''), 2000);\r\n  };\r\n\r\n  const handleCardPaymentSuccess = (bookingId) => {\r\n    setPaymentStatus('completed');\r\n    setMessage('Payment successful! Booking confirmed.');\r\n\r\n    // Redirect to my bookings after 3 seconds\r\n    setTimeout(() => {\r\n      navigate('/my-bookings');\r\n    }, 3000);\r\n  };\r\n\r\n  const handleCardPaymentError = (errorMessage) => {\r\n    setPaymentStatus('failed');\r\n    setMessage(errorMessage);\r\n  };\r\n\r\n  const handlePaymentComplete = async () => {\r\n    if (!paymentMethod) {\r\n      setMessage('Please select a payment method');\r\n      return;\r\n    }\r\n\r\n    const selectedMethod = paymentMethods.find(method => method.id === paymentMethod);\r\n\r\n    if (selectedMethod.requiresTransactionId && !transactionId.trim()) {\r\n      setMessage('Please enter transaction ID');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setPaymentStatus('processing');\r\n\r\n    try {\r\n      // First create the booking\r\n      const bookingResponse = await bookingsAPI.createBooking({\r\n        tourId,\r\n        vehicleId,\r\n        startDate: formData.startDate,\r\n        endDate: formData.endDate,\r\n        numberOfPassengers: formData.numberOfPassengers,\r\n        passengers: formData.passengers,\r\n        estimatedKms: formData.estimatedKms,\r\n        foodPreferences: formData.foodPreferences,\r\n        specialRequests: formData.specialRequests\r\n      });\r\n\r\n      const bookingId = bookingResponse.data.data._id;\r\n\r\n      // Then record the payment\r\n      await paymentsAPI.recordPayment({\r\n        bookingId,\r\n        amount: costBreakdown.advanceAmount,\r\n        paymentMethod,\r\n        transactionId: selectedMethod.requiresTransactionId ? transactionId : `CARD_${Date.now()}`,\r\n        paymentType: 'advance'\r\n      });\r\n\r\n      setPaymentStatus('completed');\r\n      setMessage('Payment successful! Booking confirmed.');\r\n\r\n      // Redirect to my bookings after 3 seconds\r\n      setTimeout(() => {\r\n        navigate('/my-bookings');\r\n      }, 3000);\r\n\r\n    } catch (error) {\r\n      console.error('Payment error:', error);\r\n      setPaymentStatus('failed');\r\n      setMessage(error.response?.data?.message || 'Payment failed. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const selectedMethod = paymentMethods.find(method => method.id === paymentMethod);\r\n\r\n  return (\r\n    <div className=\"payment-page\">\r\n      <div className=\"container\">\r\n        <div className=\"payment-header\">\r\n          <button onClick={() => navigate(-1)} className=\"back-btn\">\r\n            <FaArrowLeft /> Back to Booking\r\n          </button>\r\n          <h1>Complete Your Payment</h1>\r\n          <p>Secure payment for your tour booking</p>\r\n        </div>\r\n\r\n        {message && (\r\n          <div className={`message ${message.includes('successful') ? 'success' : message.includes('copied') ? 'success' : 'error'}`}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"payment-content\">\r\n          {/* Booking Summary */}\r\n          <div className=\"booking-summary\">\r\n            <h2>Booking Summary</h2>\r\n            <div className=\"summary-details\">\r\n              <div className=\"summary-item\">\r\n                <span className=\"label\">Tour:</span>\r\n                <span className=\"value\">Tour ID: {tourId}</span>\r\n              </div>\r\n              <div className=\"summary-item\">\r\n                <span className=\"label\">Vehicle:</span>\r\n                <span className=\"value\">Vehicle ID: {vehicleId}</span>\r\n              </div>\r\n              <div className=\"summary-item\">\r\n                <span className=\"label\">Duration:</span>\r\n                <span className=\"value\">{formData.startDate} to {formData.endDate}</span>\r\n              </div>\r\n              <div className=\"summary-item\">\r\n                <span className=\"label\">Passengers:</span>\r\n                <span className=\"value\">{formData.numberOfPassengers}</span>\r\n              </div>\r\n              <div className=\"summary-item total\">\r\n                <span className=\"label\">Advance Amount:</span>\r\n                <span className=\"value\">₹{costBreakdown?.advanceAmount?.toLocaleString()}</span>\r\n              </div>\r\n              <div className=\"summary-item total\">\r\n                <span className=\"label\">Total Amount:</span>\r\n                <span className=\"value\">₹{costBreakdown?.totalAmount?.toLocaleString()}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Payment Methods */}\r\n          <div className=\"payment-methods\">\r\n            <h2>Select Payment Method</h2>\r\n            <div className=\"methods-grid\">\r\n              {paymentMethods.map((method) => (\r\n                <div\r\n                  key={method.id}\r\n                  className={`method-card ${paymentMethod === method.id ? 'selected' : ''}`}\r\n                  onClick={() => handlePaymentMethodSelect(method.id)}\r\n                >\r\n                  <div className=\"method-icon\">\r\n                    {method.icon}\r\n                  </div>\r\n                  <div className=\"method-info\">\r\n                    <h3>{method.name}</h3>\r\n                    <p>{method.description}</p>\r\n                  </div>\r\n                  {paymentMethod === method.id && (\r\n                    <FaCheckCircle className=\"selected-icon\" />\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Payment Details */}\r\n          {selectedMethod && (\r\n            <div className=\"payment-details\">\r\n              <h2>Payment Details</h2>\r\n\r\n              {selectedMethod.id === 'card' && (\r\n                <div className=\"card-details\">\r\n                  <p>Enter your card details below to complete the payment:</p>\r\n                  <Elements stripe={stripePromise}>\r\n                    <CardPaymentForm\r\n                      amount={costBreakdown?.advanceAmount}\r\n                      bookingDetails={{ tourId, vehicleId, formData }}\r\n                      onPaymentSuccess={handleCardPaymentSuccess}\r\n                      onPaymentError={handleCardPaymentError}\r\n                      disabled={loading || paymentStatus === 'completed'}\r\n                    />\r\n                  </Elements>\r\n                </div>\r\n              )}\r\n\r\n              {selectedMethod.id === 'upi' && (\r\n                <div className=\"upi-details\">\r\n                  <p>Choose your preferred UPI app and pay the advance amount:</p>\r\n                  <div className=\"upi-options\">\r\n                    {selectedMethod.upiIds.map((upi, index) => (\r\n                      <div key={index} className=\"upi-option\">\r\n                        <div className=\"upi-info\">\r\n                          <h4>{upi.name}</h4>\r\n                          <p className=\"upi-id\">{upi.id}</p>\r\n                        </div>\r\n                        <button\r\n                          onClick={() => copyToClipboard(upi.id)}\r\n                          className=\"copy-btn\"\r\n                        >\r\n                          <FaCopy /> Copy\r\n                        </button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {selectedMethod.id === 'qr' && (\r\n                <div className=\"qr-details\">\r\n                  <p>Scan the QR code below with any UPI app:</p>\r\n                  <div className=\"qr-code\">\r\n                    <div className=\"qr-placeholder\">\r\n                      <FaQrcode className=\"qr-icon\" />\r\n                      <p>QR Code</p>\r\n                      <small>Scan to pay ₹{costBreakdown?.advanceAmount?.toLocaleString()}</small>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {selectedMethod.requiresTransactionId && (\r\n                <div className=\"transaction-input\">\r\n                  <label htmlFor=\"transactionId\">Transaction ID / UTR Number:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"transactionId\"\r\n                    value={transactionId}\r\n                    onChange={(e) => setTransactionId(e.target.value)}\r\n                    placeholder=\"Enter transaction ID after payment\"\r\n                    className=\"transaction-field\"\r\n                  />\r\n                  <small>Enter the transaction ID from your UPI app after completing the payment</small>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Payment Action */}\r\n          {selectedMethod && selectedMethod.id !== 'card' && (\r\n            <div className=\"payment-action\">\r\n              <div className=\"payment-info\">\r\n                <div className=\"amount-display\">\r\n                  <FaRupeeSign className=\"amount-icon\" />\r\n                  <span className=\"amount\">₹{costBreakdown?.advanceAmount?.toLocaleString()}</span>\r\n                  <span className=\"amount-label\">Advance Payment</span>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={handlePaymentComplete}\r\n                disabled={!paymentMethod || (selectedMethod.requiresTransactionId && !transactionId.trim()) || loading || paymentStatus === 'completed'}\r\n                className={`payment-btn ${paymentStatus === 'completed' ? 'success' : ''}`}\r\n              >\r\n                {loading ? 'Processing...' :\r\n                 paymentStatus === 'completed' ? 'Payment Completed!' :\r\n                 paymentStatus === 'processing' ? 'Confirming Payment...' :\r\n                 'Confirm Payment'}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Payment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}